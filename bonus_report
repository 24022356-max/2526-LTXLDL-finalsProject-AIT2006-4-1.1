BÁO CÁO PHÂN TÍCH BẤT THƯỜNG (ANOMALY DETECTION REPORT)
1. Mục tiêu 
Mục tiêu của phần này là tự động phát hiện các điểm dữ liệu "lệch chuẩn" trong hoạt động vận hành taxi năm 2019 nhằm:
     -  Nhận diện sự kiện tác động: Tìm ra những ngày/giờ chịu ảnh hưởng bởi ngoại cảnh (Lễ tết, Bão tuyết, Sự kiện lớn, Tắc đường).
     -  Giám sát hiệu suất: Phát hiện các khung giờ có hiệu suất vận hành kém (Tốc độ quá thấp) hoặc dấu hiệu bất thường về doanh thu (Giá cước quá cao/quá thấp).
2. Dữ liệu sử dụng 
     - Nguồn dữ liệu: Dữ liệu đã qua làm sạch (clean_yellow_tripdata_*.parquet) và được tổng hợp theo giờ (kpi_hourly_timeseries_2019.csv).
     - Đặc điểm: Dữ liệu sạch đảm bảo các điểm bất thường tìm được là sự kiện thực tế, không phải do lỗi nhập liệu.
     - Các trường thông tin chính:
          + dow,  hour.
          + trips.
          + speed_mean.
          + revenue_per_mile.
3. Phương pháp 
Sử dụng phương pháp thống kê Contextual Z-score.
     - Nhóm dữ liệu theo [Thứ trong tuần, Giờ trong ngày] (Ví dụ: So sánh 8h sáng Thứ Hai này với tất cả các 8h sáng Thứ Hai khác).
     - Công thức: Z = (x-u)/(độ lệch chuẩn)
           + x: Giá trị thực tế.
           + u: Trung bình của khung giờ đó trong lịch sử.
4. Cách đánh giá
Chúng ta xác định một điểm là bất thường nếu giá trị tuyệt đối của Z-score vượt quá ngưỡng quy định (Threshold).
     - Ngưỡng (Threshold): |Z| > 3. (Theo quy luật phân phối chuẩn, xác suất xảy ra việc này chỉ chiếm < 0.3%, tức là cực kỳ hiếm gặp).
     - Phân loại bất thường:
          + Low Demand:    Z(trips) < -3.
          + High Demand:    Z(trips) > 3.
          + Trafic jam:    Z(speeds) < -3.
          + High price rate:    Z(revenue_per_mile) > 3.
5. Liệt kê & Diễn giải các ca bất thường điển hình.
Trường hợp 1: Sự kiện Ngày Lễ (Holiday Effect) - Low Demand
     - Phát hiện: Ngày 25/12/2019 (Thứ Tư) lúc 08:00 sáng.
     - Dữ liệu: Z(trips) ≈ -4.9.
     - Diễn giải: Máy tính báo đây là bất thường vì "Thứ 4 bình thường rất đông". Tuy nhiên, thực tế đây là Giáng Sinh. Người dân nghỉ làm, không ra đường.
     =>  Mô hình phát hiện chính xác quy luật nghỉ lễ mà không cần lập trình trước lịch nghỉ.
Trường hợp 2: Sự kiện Thời tiết/Sự cố (Weather/Incident) - Traffic Jam
     - Phát hiện: Một ngày trong tháng 12 từ 20h – 21h.
     - Dữ liệu: Z(speed) ≈ -3.2.
     - Diễn giải: Tốc độ di chuyển giảm xuống rất thấp. Đây là dấu hiệu của tắc đường, có thể do tai nạn, sửa đường, hoặc bão tuyết.
     => Cảnh báo hiệu suất vận hành cực thấp, lái xe nên tránh khu vực này giờ này.
Trường hợp 3: Sự kiện Giá cước (Pricing Anomaly)
     - Phát hiện: Một vài khung giờ lúc 4-5h sáng.
     - Dữ liệu: Z(price) ≈ 3.7.
     - Diễn giải: Các chuyến đi vào giờ này chủ yếu là đi sân bay (JFK) có thể với giá cước cố định cộng thêm phụ phí đêm, nhưng đường vắng nên quãng đường ngắn hoặc thời gian nhanh. Hoặc có thể là các chuyến đi cực ngắn (vừa lên xe đã xuống) nhưng vẫn mất phí mở cửa.
